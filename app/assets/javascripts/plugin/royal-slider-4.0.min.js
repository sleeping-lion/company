(function($){function RoyalSlider(a,b){if("ontouchstart"in window){this.hasTouch=true}else{this.hasTouch=false}this.slider=$(a);var c=this;this.settings=$.extend({},$.fn.royalSlider.defaults,b);if(this.hasTouch){this.settings.directionNavAutoHide=false;this.settings.hideArrowOnLastSlide=true}this.isSlideshowRunning=false;this._az=false;this._by=this.slider.find(".royalSlidesContainer");this._cx=this._by.wrap('<div class="royalWrapper"/>').parent();this.slides=this._by.find(".royalSlide");this._dw="<p class='royalPreloader'>Loading image...</p>";this.slidesArr=[];var d,jqSlide,dataSRC,n;this.slides.each(function(){jqSlide=$(this);d={};d.slide=jqSlide;dataSRC=jqSlide.attr("data-src");if(dataSRC==undefined||dataSRC==""||dataSRC=="none"){d.preload=false}else{d.preload=true;d.preloadURL=dataSRC}if(c.settings.captionAnimationEnabled){d.caption=jqSlide.find(".royalCaption").css("display","none")}c.slidesArr.push(d)});this._ev=false;if(this.settings.removeCaptionsOpacityInIE8){if($.browser.msie&&parseInt($.browser.version,10)<=8){this._ev=true}}this.slider.css("overflow","visible");this.sliderWidth=0;this.sliderHeight=0;this.slideshowTimer='';this.numSlides=this.slides.length;this.currentSlideId=0;this.lastSlideId=-1;this.isAnimating=true;this.wasSlideshowPlaying=false;this._fu=0;this._gt=0;this._hs=[];this._ir=[];this._jq=false;this._kp=0;this._lo=0;this.mn=0;this._az1=0;this._by1=false;this._cx1=false;if(this.settings.slideshowEnabled){if(this.settings.slideshowDelay>0){if(this.settings.slideshowPauseOnHover){this.slider.hover(function(){c._cx1=true;c.stopSlideshow(true)},function(){c._cx1=false;c.resumeSlideshow(true)})}}}var f="";if($.browser.msie){if(parseInt($.browser.version,10)==7){this.isIE7=true;this._by.css("cursor","move")}}else{this.isIE7=false}if($.browser.opera){_dw1="move";_ev1="move"}else{if($.browser.mozilla){_dw1="-moz-grab";_ev1="-moz-grabbing"}else{_dw1="url(img/cursors/grab.cur), move";_ev1="url(img/cursors/grabbing.cur), move"}_dw1=$.browser.mozilla?"-moz-grab":"url(img/cursors/grab.cur), move";_ev1=$.browser.mozilla?"-moz-grabbing":"url(img/cursors/grabbing.cur), move"}this._fu1();if(this.settings.controlNavEnabled){var g;var h;if(!c.settings.controlNavThumbs){h=$('<div class="royalControlNavOverflow"><div class="royalControlNavContainer"><div class="royalControlNavCenterer"></div></div></div>');g=h.find('.royalControlNavCenterer')}else{if(c.settings.controlNavThumbsNavigation){this.thumbsArrowLeft=$("<a href='#' class='thumbsArrow left disabled'></a>");this.thumbsArrowRight=$("<a href='#' class='thumbsArrow right'></a>");this._cx.after(this.thumbsArrowLeft);this._cx.after(this.thumbsArrowRight);var i=parseInt(this.thumbsArrowLeft.outerWidth(),10);h=$('<div class="royalControlNavOverflow royalThumbs" style="left:'+i+'px; width:'+(this.slider.width()-i-parseInt(this.thumbsArrowRight.outerWidth(),10))+'px;"><div class="royalControlNavThumbsContainer"></div></div>');g=h.find('.royalControlNavThumbsContainer')}else{h=$('<div class="royalControlNavOverflow royalThumbs"><div class="royalControlNavContainer"><div class="royalControlNavCenterer"></div></div></div>');g=h.find(".royalControlNavCenterer")}}var j=0;this.slides.each(function(){if(c.settings.controlNavThumbs){g.append("<a href='#' class='royalThumb' style='background-image:url("+$(this).attr("data-thumb")+");'/>")}else{g.append('<a href="#"/>')}j++});this.navItems=g.children();this.navItems.eq(0).addClass("current");this._cx.after(h);if(c.settings.controlNavThumbs&&c.settings.controlNavThumbsNavigation){this._ir1=true;this._jq1=false;this._kp1=g;this._lo1=parseInt(h.width(),10);this._mn1=j;var k=this.navItems.eq(0);this._az2=k.outerWidth(true);this._by2=this._az2*this._mn1;this._kp1.css("width",this._by2);this._cx2=parseInt(k.css("marginRight"),10);this._by2-=this._cx2;this._ev2=0;this._fu2=-(this._by2-this._lo1);if(this._lo1>=this._by2){this._jq1=true;this.thumbsArrowRight.addClass("disabled");this.settings.controlNavThumbsNavigation=false}this.thumbsArrowLeft.click(function(e){e.preventDefault();if(!c._ir1)c._gt2(c._ev2+c._lo1+c._cx2)});this.thumbsArrowRight.click(function(e){e.preventDefault();if(!c._jq1)c._gt2(c._ev2-c._lo1-c._cx2)})}}if(this.settings.directionNavEnabled){this._cx.after("<a href='#' class='arrow left'/>");this._cx.after("<a href='#' class='arrow right'/>");this.arrowLeft=this.slider.find("a.arrow.left");this.arrowRight=this.slider.find("a.arrow.right");if(this.arrowLeft.length<1||this.arrowRight.length<1){this.settings.directionNavEnabled=false}else if(this.settings.directionNavAutoHide){this.arrowLeft.hide();this.arrowRight.hide();this.slider.bind("mousemove.arrowshover",function(){c.arrowLeft.fadeIn("fast");c.arrowRight.fadeIn("fast");c.slider.unbind("mousemove.arrowshover")});this.slider.hover(function(){c.arrowLeft.fadeIn("fast");c.arrowRight.fadeIn("fast")},function(){c.arrowLeft.fadeOut("fast");c.arrowRight.fadeOut("fast")})}if(this.settings.hideArrowOnLastSlide){this._az3=true;this._by3=false;this.arrowLeft.addClass("disabled")}}this.slidesWrapperWidth=0;this.slidesWrapperHeight=0;var l;$(window).bind('resize.rs',function(){if(l)clearTimeout(l);l=setTimeout(function(){c.updateSliderSize()},100)});this.updateSliderSize();this.settings.beforeLoadStart.call(this);var m=this.slidesArr[0];if(this.settings.welcomeScreenEnabled){function hideWelcomeScreen(){c.settings.loadingComplete.call(c);if(c.settings.preloadNearbyImages){c._cx3(c.slidesArr[1])}c.slider.find(".royalLoadingScreen").fadeOut(c.settings.welcomeScreenShowSpeed);setTimeout(function(){c._dw3()},c.settings.welcomeScreenShowSpeed+100)}if(m.preload){this._cx3(m,function(){hideWelcomeScreen()})}else{var n=m.slide.find("img.royalImage")[0];if(n){if(this._ev3(n)){hideWelcomeScreen()}else{$('<img />').load(function(){hideWelcomeScreen()}).attr('src',n.src)}}else{hideWelcomeScreen()}}}else{if(m.preload){this._cx3(m,function(){c.settings.loadingComplete.call(c);if(c.settings.preloadNearbyImages){c._cx3(c.slidesArr[1])}})}else{this.settings.loadingComplete.call(this)}setTimeout(function(){c._dw3()},100)}}RoyalSlider.prototype={goTo:function(a,b){if(!this.isAnimating){this.isAnimating=true;var c=this;this.lastSlideId=this.currentSlideId;this.currentSlideId=a;this._by.unbind("mousedown").unbind("touchstart").unbind("MozTouchDown");this._jq=true;if(this.settings.controlNavEnabled){this.navItems.eq(this.lastSlideId).removeClass('current');this.navItems.eq(a).addClass("current");if(this.settings.controlNavThumbs&&this.settings.controlNavThumbsNavigation){var d=this.navItems.eq(a).position().left;var e=d-Math.abs(this._ev2);if(e>this._lo1-this._az2*2-1-this._cx2){if(!b){this._gt2(-d+this._az2)}else{this._gt2(-d-this._az2*2+this._lo1+this._cx2)}}else if(e<this._az2*2-1){if(!b){this._gt2(-d-this._az2*2+this._lo1+this._cx2)}else{this._gt2(-d+this._az2)}}}}if(this.lastSlideId!=a){if(this.settings.preloadNearbyImages){var c=this;this._cx3(this.slidesArr[a],function(){c._cx3(c.slidesArr[a+1],function(){c._cx3(c.slidesArr[a-1])})})}else{this._cx3(this.slidesArr[a])}}if(this.settings.directionNavEnabled){if(this.settings.hideArrowOnLastSlide){if(this.currentSlideId==0){this._az3=true;this.arrowLeft.addClass("disabled");if(this._ir3){this._ir3=false;this.arrowRight.removeClass("disabled")}}else if(this.currentSlideId==this.numSlides-1){this._ir3=true;this.arrowRight.addClass("disabled");if(this._az3){this._az3=false;this.arrowLeft.removeClass("disabled")}}else{if(this._az3){this._az3=false;this.arrowLeft.removeClass("disabled")}else if(this._ir3){this._ir3=false;this.arrowRight.removeClass("disabled")}}}}this.settings.beforeSlideChange.call(this);this.stopSlideshow();this._by.animate({left:-this.currentSlideId*this.sliderWidth},this.settings.slideTransitionSpeed,this.settings.slideTransitionEasing,function(){c._jq3()})}},prev:function(){if(this.currentSlideId<=0){this.goTo(this.numSlides-1)}else{this._kp3()}},next:function(){if(this.currentSlideId>=this.numSlides-1){this.goTo(0)}else{this._lo3()}},resumeSlideshow:function(a){if(this.settings.slideshowEnabled){if(this.slideshowTimer==''){if(a){if(!this._az){return}}var b=this;this.slideshowTimer=setInterval(function(){b.next()},this.settings.slideshowDelay);this.isSlideshowRunning=true}}},stopSlideshow:function(a){if(this.settings.slideshowEnabled){if(a){this._az=this.isSlideshowRunning}else{this._az=false;this.isSlideshowRunning=false}clearInterval(this.slideshowTimer);this.slideshowTimer=''}},_cx3:function(a,b){if(a){if(a.preload){var c=this;var d=new Image();var e=$(d);e.css("opacity",0);e.addClass("royalImage");a.slide.prepend(e);a.slide.prepend(this._dw);a.preload=false;e.load(function(){c._fu3(e,c.slidesWrapperWidth,c.slidesWrapperHeight);e.animate({"opacity":1},"fast");a.slide.find(".royalPreloader").remove();if(b)b.call()});d.src=a.preloadURL}else{if(b)b.call()}}else{if(b)b.call()}},_gt2:function(a){if(a!=this._ev2){if(a<=this._fu2){a=this._fu2;this._ir1=false;this._jq1=true;this.thumbsArrowRight.addClass("disabled");this.thumbsArrowLeft.removeClass("disabled")}else if(a>=0){a=0;this._ir1=true;this._jq1=false;this.thumbsArrowLeft.addClass("disabled");this.thumbsArrowRight.removeClass("disabled")}else{if(this._ir1){this._ir1=false;this.thumbsArrowLeft.removeClass("disabled")}else if(this._jq1){this._jq1=false;this.thumbsArrowRight.removeClass("disabled")}}this._kp1.animate({left:a},this.settings.controlNavThumbsSpeed,this.settings.controlNavThumbsEasing);this._ev2=a}},_dw3:function(){var a=this;this.slider.find(".royalLoadingScreen").remove();if(this.settings.controlNavEnabled){this.navItems.bind("click",function(e){e.preventDefault();if(!a._jq)a._mn3(e)})}if(this.settings.directionNavEnabled){this.arrowRight.click(function(e){e.preventDefault();if(!a._ir3&&!a._jq)a.next()});this.arrowLeft.click(function(e){e.preventDefault();if(!a._az3&&!a._jq)a.prev()})}this._jq3();if(this.settings.slideshowEnabled&&!this.settings.slideshowAutoStart){this.stopSlideshow()}this.settings.allComplete.call(this)},_fu1:function(){if(!this.isIE7){this._by.css("cursor",_dw1)}},_az4:function(){if(!this.isIE7){this._by.css("cursor",_ev1)}},_lo3:function(){if(this.currentSlideId<this.numSlides-1){this.goTo(this.currentSlideId+1)}else{this.goTo(this.currentSlideId)}},_kp3:function(){if(this.currentSlideId>0){this.goTo(this.currentSlideId-1)}else{this.goTo(this.currentSlideId)}},updateSliderSize:function(){var a=this;this.slidesWrapperWidth=this._cx.width();this.slidesWrapperHeight=this._cx.height();if(this.slidesWrapperWidth!=this.sliderWidth||this.slidesWrapperHeight!=this.sliderHeight){this.sliderWidth=this.slidesWrapperWidth;var b=this.slidesArr.length;var c,_cx4;for(var i=0,len=b;i<len;++i){c=this.slidesArr[i];_cx4=c.slide.find("img.royalImage")[0];if(_cx4&&c.preload==false){this._fu3($(_cx4),this.slidesWrapperWidth,this.slidesWrapperHeight)}c.slide.css({height:a.slidesWrapperHeight,width:a.slidesWrapperWidth})}this._by.css({"left":-this.currentSlideId*this.sliderWidth,width:this.sliderWidth*this.numSlides})}},_mn3:function(e){this.goTo($(e.currentTarget).index(),true)},_dw4:function(e){if(!this._by1){var a;if(this.hasTouch){var b=e.originalEvent.touches;if(b&&b.length>0){a=b[0]}else{return false}}else{a=e;e.preventDefault()}if(this.slideshowTimer!=''){this.wasSlideshowPlaying=true;this.stopSlideshow()}else{this.wasSlideshowPlaying=false}this._az4();this._by1=true;var c=this;$(document).bind("mousemove.rs touchmove.rs MozTouchMove.rs",function(e){c._ev4(e)});$(document).bind("mouseup.rs touchend.rs MozTouchRelease.rs",function(e){c._fu4(e)});this._kp=parseInt(this._by.css("left"),10);this._lo=a.clientX;this.mn=a.clientY;this._az1=parseInt(this._by.css("left"),10)}return false},_ev4:function(e){var a;if(this.hasTouch){var b=e.originalEvent.touches;if(b.length>1){return false}a=b[0];if(Math.abs(a.clientY-this.mn)+10>Math.abs(a.clientX-this._lo)){return false}e.preventDefault()}else{a=e;e.preventDefault()}this._gt=this._fu;var c=a.clientX-this._lo;if(this._gt!=c){this._fu=c}if(c!=0){if(this.currentSlideId==0){if(c>0){c=Math.sqrt(c)*5}}else if(this.currentSlideId==(this.numSlides-1)){if(c<0){c=-Math.sqrt(-c)*5}}this._by.css("left",this._kp+c)}return false},_fu4:function(e){if(this.wasSlideshowPlaying){this.resumeSlideshow()}if(this._by1){this._by1=false;this._fu1();this.endPos=parseInt(this._by.css("left"),10);this.isdrag=false;$(document).unbind("mousemove.rs").unbind("touchmove.rs").unbind("MozTouchMove.rs").unbind("mouseup.rs").unbind("touchend.rs").unbind("MozTouchRelease.rs");if(this.endPos==this._az1){return}if(this._az1-this.settings.minSlideOffset>this.endPos){if(this._gt<this._fu){this.goTo(this.currentSlideId);return false}this._lo3()}else if(this._az1+this.settings.minSlideOffset<this.endPos){if(this._gt>this._fu){this.goTo(this.currentSlideId);return false}this._kp3()}else{this.goTo(this.currentSlideId)}}return false},_jq3:function(){var a=this;this.resumeSlideshow();this._jq=false;this._by.bind("mousedown touchstart MozTouchDown",function(e){a._dw4(e)});if(this.settings.captionAnimationEnabled&&this.lastSlideId!=this.currentSlideId){if(this.lastSlideId!=-1){this.slidesArr[this.lastSlideId].caption.css("display","none")}setTimeout(function(){a._gt4(a.currentSlideId)},10)}this.isAnimating=false;this.settings.afterSlideChange.call(this)},_gt4:function(g){var h=this.slidesArr[g].caption;if(h.length){h.css("display","block");var j=this;var l,fadeEnabled,moveEnabled,effectName,effectsObject,moveEffectProperty,currEffects,newEffectObj,moveOffset,delay,speed,easing,moveProp;var m=h.children();if(this._hs.length>0){for(var a=this._hs.length-1;a>-1;a--){clearTimeout(this._hs.splice(a,1))}}if(this._ir.length>0){var n;for(var k=this._ir.length-1;k>-1;k--){n=this._ir[k];if(n!=undefined){n.captionItem.css(n.css)}this._ir.splice(k,1)}}for(var i=0;i<m.length;i++){l=$(m[i]);effectsObject={};fadeEnabled=false;moveEnabled=false;moveEffectProperty="";if(l.attr("data-show-effect")==undefined){currEffects=this.settings.captionShowEffects}else{currEffects=l.attr("data-show-effect").split(" ")}for(var q=0;q<currEffects.length;q++){if(fadeEnabled&&moveEnabled){break}effectName=currEffects[q].toLowerCase();if(!fadeEnabled&&effectName=="fade"){fadeEnabled=true;effectsObject['opacity']=1}else if(moveEnabled){break}else if(effectName=="movetop"){moveEffectProperty="margin-top"}else if(effectName=="moveleft"){moveEffectProperty="margin-left"}else if(effectName=="movebottom"){moveEffectProperty="margin-bottom"}else if(effectName=="moveright"){moveEffectProperty="margin-right"}if(moveEffectProperty!=""){effectsObject['moveProp']=moveEffectProperty;effectsObject['moveStartPos']=parseInt(l.css(moveEffectProperty),10);moveEnabled=true}}moveOffset=parseInt(l.attr("data-move-offset"),10);if(isNaN(moveOffset)){moveOffset=this.settings.captionMoveOffset}delay=parseInt(l.attr("data-delay"),10);if(isNaN(delay)){delay=j.settings.captionShowDelay*i+10}speed=parseInt(l.attr("data-speed"),10);if(isNaN(speed)){speed=j.settings.captionShowSpeed}easing=l.attr("data-easing");if(easing==undefined){easing=j.settings.captionShowEasing}newEffectObj={};if(moveEnabled){moveProp=effectsObject.moveProp;if(moveProp=="margin-right"){moveProp="margin-left";newEffectObj[moveProp]=effectsObject.moveStartPos+moveOffset}else if(moveProp=="margin-bottom"){moveProp="margin-top";newEffectObj[moveProp]=effectsObject.moveStartPos+moveOffset}else{newEffectObj[moveProp]=effectsObject.moveStartPos-moveOffset}}if(!j._ev&&fadeEnabled){newEffectObj.opacity=0}l.hide().css(newEffectObj);if(moveEnabled){newEffectObj[moveProp]=effectsObject.moveStartPos}if(!j._ev&&fadeEnabled){newEffectObj.opacity=1}this._ir.push({captionItem:l,css:newEffectObj});this._hs.push(setTimeout((function(a,b,c,d,e,f){return function(){delete j._ir[e];a.show().animate(b,c,d)}})(l,newEffectObj,speed,easing,i,fadeEnabled),delay))}}},_fu3:function(f,g,h){var i=this.settings.imageScaleMode;var j=this.settings.imageAlignCenter;if(j||i=="fill"||i=="fit"){function scaleImg(){var a,vRatio,ratio,nWidth,nHeight;var b=new Image();b.src=f.attr("src");var c=b.width;var d=b.height;var e=parseInt(f.css("borderWidth"),10);e=isNaN(e)?0:e;a=g/c;vRatio=h/d;if(i=="fill"){ratio=a>vRatio?a:vRatio}else if(i=="fit"){ratio=a<vRatio?a:vRatio}else{ratio=1}nWidth=parseInt(c*ratio,10)-e;nHeight=parseInt(d*ratio,10)-e;f.attr({"width":nWidth,"height":nHeight}).css({"width":nWidth,"height":nHeight});if(j){f.css({"margin-left":Math.floor((g-nWidth)/2),"margin-top":Math.floor((h-nHeight)/2)})}};f.removeAttr('height').removeAttr('width');if(!this._ev3(f.get(0))){$('<img />').load(function(){scaleImg()}).attr('src',f.attr("src"))}else{scaleImg()}}},_ev3:function(a){if(!a.complete){return false}if(typeof a.naturalWidth!="undefined"&&a.naturalWidth==0){return false}return true}};$.fn.royalSlider=function(b){return this.each(function(){var a=new RoyalSlider($(this),b);$(this).data("royalSlider",a)})};$.fn.royalSlider.defaults={preloadNearbyImages:true,imageScaleMode:"fill",imageAlignCenter:true,directionNavEnabled:true,directionNavAutoHide:false,hideArrowOnLastSlide:false,slideTransitionSpeed:400,slideTransitionEasing:"easeInOutSine",captionAnimationEnabled:true,captionShowEffects:["fade","moveleft"],captionMoveOffset:20,captionShowSpeed:400,captionShowEasing:"easeOutCubic",captionShowDelay:200,controlNavEnabled:true,controlNavThumbs:false,controlNavThumbsNavigation:true,controlNavThumbsSpeed:400,controlNavThumbsEasing:"easeInOutSine",slideshowEnabled:false,slideshowDelay:5000,slideshowPauseOnHover:true,slideshowAutoStart:true,welcomeScreenEnabled:true,welcomeScreenShowSpeed:500,minSlideOffset:20,removeCaptionsOpacityInIE8:false,beforeSlideChange:function(){},afterSlideChange:function(){},beforeLoadStart:function(){},loadingComplete:function(){},allComplete:function(){}};$.fn.royalSlider.settings={}})(jQuery);